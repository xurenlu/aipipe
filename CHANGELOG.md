# 更新日志

## [2.0.0] - 2025-10-13

### 重大更新

#### 批处理模式 📦
- ✅ 智能累积多行日志后批量分析
- ✅ 防抖处理：10 行或 3 秒触发
- ✅ 节省 70-90% Token 消耗
- ✅ 减少 80-90% 通知次数
- ✅ 提高 10 倍处理速度

#### 多行日志合并 🔗
- ✅ 自动识别和合并 Java 异常堆栈
- ✅ 支持 Python、Ruby 等多行日志
- ✅ 完整的错误上下文

#### 上下文显示 📋
- ✅ 重要日志自动显示前后 3 行上下文
- ✅ 可配置上下文行数（--context）
- ✅ 用 `│` 标记上下文行
- ✅ 方便排查问题

#### 简洁输出 🎯
- ✅ 默认只显示重要日志
- ✅ 过滤的日志不显示（--show-not-important 可显示）
- ✅ 每行不显示单独摘要
- ✅ 只在批次显示整体摘要

### 优化

#### 本地预过滤 ⚡
- ✅ DEBUG/INFO/TRACE 本地处理，不调用 AI
- ✅ 处理速度提升 10-30 倍
- ✅ 减少 60-80% API 调用
- ✅ 包含错误关键词的仍调用 AI

#### 保守过滤策略 🛡️
- ✅ AI 无法确定时默认过滤
- ✅ 检测 11 个不确定关键词
- ✅ 减少 75% 误报率

#### System Prompt 优化 🎯
- ✅ 使用 system + user 两条消息
- ✅ 60+ 个真实场景示例
- ✅ 更准确的 AI 判断

### 新增功能

- ✅ 文件监控模式支持批处理
- ✅ 中文通知优化（修复乱码）
- ✅ 增强的 JSON 解析（兼容 markdown 代码块）
- ✅ 多层次声音播放策略
- ✅ Debug 模式（--debug）
- ✅ 断点续传
- ✅ 日志轮转支持

### API 变更

- 🔄 从 Poe API 迁移到 Azure OpenAI API
- 🔄 使用 gpt-5-mini 模型

## [1.0.0] - 2025-10-13

### 初始发布

- ✅ AI 智能分析日志
- ✅ 多格式支持（Java、PHP、Nginx 等）
- ✅ macOS 系统通知
- ✅ 文件监控模式
- ✅ 管道模式支持
- ✅ 基本的过滤功能

---

格式说明：
- ✅ 新增功能
- 🔄 变更
- 🐛 修复
- ⚠️ 弃用
- ❌ 移除

