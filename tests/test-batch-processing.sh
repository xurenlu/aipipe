#!/bin/bash

echo "=========================================="
echo "SuperTail æ‰¹å¤„ç†æ¨¡å¼æµ‹è¯•"
echo "=========================================="
echo ""

echo "æ‰¹å¤„ç†æ¨¡å¼çš„ä¼˜åŠ¿ï¼š"
echo "  â€¢ ä¸€æ¬¡åˆ†æžå¤šè¡Œæ—¥å¿—ï¼ˆé»˜è®¤æœ€å¤š 10 è¡Œï¼‰"
echo "  â€¢ å‡å°‘ API è°ƒç”¨æ¬¡æ•°ï¼ˆèŠ‚çœè´¹ç”¨å’Œæ—¶é—´ï¼‰"
echo "  â€¢ å‡å°‘é€šçŸ¥æ¬¡æ•°ï¼ˆé¿å…é¢‘ç¹æ‰“æ‰°ï¼‰"
echo "  â€¢ æ˜¾ç¤ºæ•´ä½“æ‘˜è¦è€Œä¸æ˜¯æ¯è¡Œæ‘˜è¦"
echo ""

# åˆ›å»ºæµ‹è¯•æ—¥å¿—
cat > test-batch.log << 'EOF'
2025-10-13 10:00:00 INFO Application started successfully
2025-10-13 10:00:01 INFO User logged in: alice@example.com
2025-10-13 10:00:02 DEBUG Processing request parameters
2025-10-13 10:00:03 INFO Retrieved 20 records from database
2025-10-13 10:00:04 ERROR Database connection timeout
2025-10-13 10:00:05 ERROR NullPointerException at line 123
2025-10-13 10:00:06 WARN Memory usage high: 85%
2025-10-13 10:00:07 INFO Request completed in 50ms
2025-10-13 10:00:08 ERROR Authentication failed
2025-10-13 10:00:09 INFO Health check OK
EOF

echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "æµ‹è¯• 1: æ‰¹å¤„ç†æ¨¡å¼ï¼ˆé»˜è®¤ï¼‰"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "å‘½ä»¤: cat test-batch.log | ./supertail --format java"
echo ""
echo "é¢„æœŸï¼š"
echo "  â€¢ DEBUG/INFO æœ¬åœ°è¿‡æ»¤ï¼ˆä¸è°ƒç”¨ AIï¼‰"
echo "  â€¢ ERROR/WARN æ‰¹é‡å‘ç»™ AI åˆ†æž"
echo "  â€¢ æ˜¾ç¤ºä¸€ä¸ªæ•´ä½“æ‘˜è¦"
echo "  â€¢ åªå‘é€ä¸€æ¬¡é€šçŸ¥"
echo ""
echo "æŒ‰ Enter ç»§ç»­..."
read

cat test-batch.log | ./supertail --format java

echo ""
echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "æµ‹è¯• 2: æ‰¹å¤„ç†æ¨¡å¼ï¼ˆè¯¦ç»†è¾“å‡ºï¼‰"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "å‘½ä»¤: cat test-batch.log | ./supertail --format java --verbose"
echo ""
echo "é¢„æœŸï¼š"
echo "  â€¢ çœ‹åˆ°ã€Œâš¡ æœ¬åœ°è¿‡æ»¤ã€æç¤º"
echo "  â€¢ çœ‹åˆ°ã€ŒðŸ“¦ æ‰¹æ¬¡ã€å¤„ç†æç¤º"
echo "  â€¢ æ˜¾ç¤ºæ‰¹æ¬¡ç»Ÿè®¡ä¿¡æ¯"
echo ""
echo "æŒ‰ Enter ç»§ç»­..."
read

cat test-batch.log | ./supertail --format java --verbose

echo ""
echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "æµ‹è¯• 3: é€è¡Œæ¨¡å¼ï¼ˆå¯¹æ¯”ï¼‰"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "å‘½ä»¤: cat test-batch.log | ./supertail --format java --no-batch"
echo ""
echo "é¢„æœŸï¼š"
echo "  â€¢ æ¯è¡Œå•ç‹¬åˆ†æž"
echo "  â€¢ API è°ƒç”¨æ¬¡æ•°æ›´å¤š"
echo "  â€¢ æ¯è¡Œéƒ½æœ‰å•ç‹¬çš„æ‘˜è¦"
echo "  â€¢ å¯èƒ½å‘é€å¤šæ¬¡é€šçŸ¥"
echo ""
echo "æŒ‰ Enter ç»§ç»­..."
read

cat test-batch.log | ./supertail --format java --no-batch

echo ""
echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "æµ‹è¯• 4: è‡ªå®šä¹‰æ‰¹å¤„ç†å‚æ•°"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "å‘½ä»¤: cat test-batch.log | ./supertail --format java --batch-size 5 --batch-wait 1s"
echo ""
echo "é¢„æœŸï¼š"
echo "  â€¢ æ¯æ‰¹æœ€å¤š 5 è¡Œ"
echo "  â€¢ ç­‰å¾… 1 ç§’åŽè‡ªåŠ¨å¤„ç†"
echo "  â€¢ å¯èƒ½åˆ†æˆå¤šä¸ªæ‰¹æ¬¡"
echo ""
echo "æŒ‰ Enter ç»§ç»­..."
read

cat test-batch.log | ./supertail --format java --batch-size 5 --batch-wait 1s --verbose

echo ""
echo ""
echo "=========================================="
echo "âœ… æµ‹è¯•å®Œæˆï¼"
echo "=========================================="
echo ""
echo "ðŸ“Š æ‰¹å¤„ç†æ¨¡å¼ vs é€è¡Œæ¨¡å¼å¯¹æ¯”ï¼š"
echo ""
echo "â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”"
echo "â”‚ æŒ‡æ ‡         â”‚ æ‰¹å¤„ç†  â”‚ é€è¡Œ    â”‚"
echo "â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤"
echo "â”‚ API è°ƒç”¨æ¬¡æ•° â”‚ 1-2 æ¬¡  â”‚ 3-4 æ¬¡  â”‚"
echo "â”‚ å¤„ç†é€Ÿåº¦     â”‚ å¿«      â”‚ æ…¢      â”‚"
echo "â”‚ Token æ¶ˆè€—   â”‚ ä½Ž      â”‚ é«˜      â”‚"
echo "â”‚ é€šçŸ¥æ¬¡æ•°     â”‚ 1 æ¬¡    â”‚ 3-4 æ¬¡  â”‚"
echo "â”‚ ç”¨æˆ·ä½“éªŒ     â”‚ å¥½      â”‚ ä¸€èˆ¬    â”‚"
echo "â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜"
echo ""
echo "ðŸ’¡ ä½¿ç”¨å»ºè®®ï¼š"
echo ""
echo "âœ… æŽ¨èä½¿ç”¨æ‰¹å¤„ç†æ¨¡å¼ï¼ˆé»˜è®¤ï¼‰ï¼š"
echo "   cat app.log | ./supertail --format java"
echo "   ./supertail -f app.log --format java"
echo ""
echo "âš™ï¸  è‡ªå®šä¹‰æ‰¹å¤„ç†å‚æ•°ï¼š"
echo "   --batch-size 10      # æ¯æ‰¹æœ€å¤š 10 è¡Œï¼ˆé»˜è®¤ï¼‰"
echo "   --batch-wait 3s      # ç­‰å¾… 3 ç§’ï¼ˆé»˜è®¤ï¼‰"
echo ""
echo "ðŸ”§ ç¦ç”¨æ‰¹å¤„ç†ï¼ˆé€è¡Œåˆ†æžï¼‰ï¼š"
echo "   ./supertail --format java --no-batch"
echo ""
echo "ðŸ§¹ æ¸…ç†æµ‹è¯•æ–‡ä»¶ï¼š"
echo "   rm test-batch.log"
echo ""
echo "=========================================="

